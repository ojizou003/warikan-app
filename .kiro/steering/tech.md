# 割り勘アプリ - 技術スタック

## アーキテクチャ
- **パターン**: レイヤー型アーキテクチャ（HTML構造 → CSSスタイル → JavaScriptロジック）
- **実行環境**: クライアントサイドのみ（サーバーレス）
- **状態管理**: DOMベースの状態管理（グローバル状態なし）
- **データフロー**: イベント駆動型（ユーザー入力 → DOM更新）

## フロントエンド
### HTML5
- **DOCTYPE**: HTML5
- **セマンティクス**: `<div>`ベースのシンプル構造
- **メタデータ**: viewport設定、文字コードUTF-8
- **スクリプト読み込み**: `defer`属性で非同期読み込み

### CSS3
- **レイアウト**: Flexbox + Gridハイブリッド
- **レスポンシブ**: 4段階ブレークポイント（600px, 480px, 320px）
- **アニメーション**: CSS Transitions + Keyframes
- **スタイル機能**:
  - カスタムプロパティ（CSS変数）使用済み
  - グラデーション背景
  - ボックスシャドウ
  - テキストシャドウ
  - トランスフォーム

### JavaScript (ES6+)
- **実行モード**: `"use strict"`
- **機能**:
  - DOM操作
  - イベントハンドリング
  - Web Audio API
  - 文字列処理（全角→半角変換）
  - バリデーション
  - セキュリティ（XSS対策）
- **ES6+機能**:
  - const/let変数宣言
  - アロー関数
  - テンプレートリテラル
  - 分割代入
  - Promise（Web Audio APIで使用）

## 開発環境
### 必要ツール
- **テキストエディタ**: 任意
- **ブラウザ**: Chrome, Firefox, Safari, Edge
- **Webサーバー**: 任意（ローカルファイル直接開くも可）
- **バージョン管理**: Git
- **Node.js**: 18+ （開発・テスト用）

### ビルドシステム
- **Vite**: 高速な開発サーバーとモダンなビルドツール
- **Vitest**: モダンなテストフレームワーク
- **最適化**: Viteによる自動最適化（コード圧縮、バンドル等）

## 一般的なコマンド
```bash
# 開発サーバー起動
npm run dev

# テスト実行
npm test

# テストUIで実行
npm run test:ui

# ビルド
npm run build

# プレビュー
npm run preview

# Git操作
git add .
git commit -m "コミットメッセージ"
git push origin feature
```

## 環境変数
- **なし**: 環境変数不要

## ポート構成
- **開発**: 5173（Viteデフォルト）
- **本番**: 80/443（Webサーバー標準）

## API連携
- **なし**: 外部API未使用

## データストレージ
- **なし**: 永続化なし
- **一時データ**: メモリ内変数のみ

## ブラウザ互換性
- **Chrome**: 60+
- **Firefox**: 55+
- **Safari**: 12+
- **Edge**: 79+
- **モバイル**: iOS Safari 12+, Chrome Mobile 60+

## パフォーマンス最適化
- **遅延読み込み**: defer属性使用
- **非同期処理**: Web Audio APIの非同期初期化
- **イベント最適化**: イベントリスナーの適切な管理
- **メモリ管理**: 不要な参照解放（明示的ではない）
- **CSS最適化**: カスタムプロパティによる再利用

## セキュリティ考慮事項
- **XSS対策**: ✅ 実装済み
  - HTMLエスケープ関数を実装（escapeHTML）
  - DOM操作をtextContent/createElementに変更
  - 入力検証に危険なパターンチェックを追加
  - セキュリティテストを実装
- **CSP**: 未設定（必要に応じて）
- **HTTPS推奨**: 生産環境では必須
- **入力サニタイズ**: 数値入力の検証強化
- **DOM安全性**: innerHTMLの使用を最小限に抑制

## 第三者ライブラリ
- **なし**: ヴァニラJSのみ
- **開発ライブラリ**: Vitest, jsdom（テスト用）

## テスト環境
- **Vitest**: 高速な単体テストフレームワーク
- **jsdom**: DOMテスト環境
- **テスト対象**: 
  - 計算ロジック（calculation.test.js）
  - 入力検証（validation.test.js）
  - セキュリティ（security.test.js）
- **カバレッジ**: 95%以上のテストカバレッジを目標

## デプロイ
- **静的ホスティング**: Netlify, Vercel, GitHub Pages等
- **CDN**: 任意
- **HTTPS**: 必須

## コード品質
- **ESLint**: 未設定（導入検討中）
- **Prettier**: 未設定（導入検討中）
- **TypeScript**: 未使用（JavaScript ES6+）
- **テストカバレッジ**: 95%以上維持

## 開発ワークフロー
- **ブランチ戦略**: Git Flow（featureブランチ使用）
- **コードレビュー**: プルリクエスト必須
- **自動テスト**: コミット時に実行
- **リリース**: mainブランチへマージ後自動デプロイ